From e08adc468f97847b56cdc848542985631a07fad0 Mon Sep 17 00:00:00 2001
From: Ashton Stricker <ashton.stricker@vivint.com>
Date: Thu, 22 Feb 2024 14:30:41 -0700
Subject: [PATCH] added tls validation to default gstreamer pipeline.

Change-Id: Ie5d1d9f613c3d69616ce1d0bf49c0d9b8c2de679
---
 src/gsttools/qgstreamerplayersession.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/gsttools/qgstreamerplayersession.cpp b/src/gsttools/qgstreamerplayersession.cpp
index 871704f0e..733fcd0cb 100644
--- a/src/gsttools/qgstreamerplayersession.cpp
+++ b/src/gsttools/qgstreamerplayersession.cpp
@@ -1974,6 +1974,8 @@ void QGstreamerPlayerSession::handleElementAdded(GstBin *bin, GstElement *elemen
         gst_pad_add_probe(pad, (GstPadProbeType)(GST_PAD_PROBE_TYPE_BUFFER), drop_until_keyframe_cb, session, nullptr);
         gst_object_unref(GST_OBJECT(pad));
 #endif
+    } else if (g_str_has_prefix(elementName, "rtspsrc")) {
+	g_object_set(G_OBJECT(element), "tls-validation-flags", "generic-error", nullptr);
     }
 
     g_free(elementName);
-- 
2.34.1

