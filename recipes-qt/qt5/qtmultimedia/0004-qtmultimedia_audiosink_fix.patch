# HG changeset patch
# User Craig Matsuura <cmatsuura@vivnt.com>
# Date 1470788663 21600
#      Tue Aug 09 18:24:23 2016 -0600
# Node ID 140ad46216464fa47c4de3b085ab7014d22ff8ba
# Parent  cc62168ae582335397cc0f9ef271bcf01766a85d
Added new sync check

diff --git a/src/plugins/gstreamer/mediaplayer/qgstreamerplayersession.cpp b/src/plugins/gstreamer/mediaplayer/qgstreamerplayersession.cpp
--- a/src/plugins/gstreamer/mediaplayer/qgstreamerplayersession.cpp
+++ b/src/plugins/gstreamer/mediaplayer/qgstreamerplayersession.cpp
@@ -176,6 +177,21 @@
         g_object_set(G_OBJECT(m_playbin), "flags", flags, NULL);
 
         GstElement *audioSink = gst_element_factory_make("autoaudiosink", "audiosink");
+
+        // Double check for an audio sync and use one of hte following if we do not find one.
+#if GST_CHECK_VERSION(1,0,0)
+        if (!audioSink) {
+                qDebug() << "NO AUDIO-SINK autoaudiosink!";
+                audioSink = gst_element_factory_make("pulsesink", "audiosink");
+                if (!audioSink) {
+                        qDebug() << "NO AUDIO-SINK pulsesink!!!!";
+                        audioSink = gst_element_factory_make("audiobasesink", "audiosink");
+                }
+        }
+        else {
+                qDebug() << "FOUND a AUDIO-SINK autoaudiosink!";
+        }
+#endif
         if (audioSink) {
             //GstCaps *caps = gst_caps_from_string ("audio/x-raw-int,channels=2");
             GstElement * level = gst_element_factory_make( "level", "gulevelctrl" );
