<!--
* Copyright (C) 2012, Freescale Semiconductor, Inc. All Rights Reserved.
* The CFG element contains a list of recognized usb devices.
*  DEV elements provide a name, class, vid and pid for each device.
*
* Each LIST element contains a list of update instructions.
*  "Install" - Erase media and install firmware.
*  "Update" - Update firmware only.
*
* Each CMD element contains one update instruction of attribute type.
*  "pull" - Does UtpRead(body, file) transaction.
*  "push" - Does UtpWrite(body, file) transaction.
*  "drop" - Does UtpCommand(body) then waits for device to disconnect.
*  "boot" - Finds configured device, forces it to "body" device and downloads "file".
*  "find" - Waits for "timeout" seconds for the "body" device to connect.
*  "show" - Parse and show device info in "file".  
-->


<UCL>
  <CFG>
    <STATE name="BootStrap" dev="MX6D" vid="15A2" pid="0061"/>
    <STATE name="Updater"   dev="MSC" vid="066F" pid="37FF"/>
  </CFG>

  <LIST name="Slimline-Preflashed-eMMC" desc="Boot from preflashed eMMC">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>
    <CMD state="BootStrap" type="jump" > Jumping to OS image. </CMD>
  </LIST>

  <LIST name="Slimline-Reflash-No-Serial" desc="Reflash a Slimline, do not prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/slimline-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-slimline-ldo-nofec.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/slimline-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>
  </LIST>

  <LIST name="Slimline-Reflash-Plus-Serial" desc="Reflash a Slimline and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/slimline-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-slimline-ldo-nofec.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/slimline-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Sly-Preflashed-eMMC" desc="Boot from preflashed eMMC">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>
    <CMD state="BootStrap" type="jump" > Jumping to OS image. </CMD>
  </LIST>

  <LIST name="Sly-v3-Reflash-No-Serial" desc="Reflash a Sly-v3, do not prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-sly-v3-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>
  </LIST>

  <LIST name="Sly-v3-Reflash-Plus-Serial" desc="Reflash a Sly-v3 and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-sly-v3-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Sly-v3-FCC-Reflash-Plus-Serial" desc="Reflash a Sly-v3, fixup procmand and fonts,  prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-sly-v3-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>
    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/fccfixup">Fixing up image for FCC testing</CMD>
    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/labmodem">Fixing up modem configuration for lab testing</CMD>
  </LIST>

  <LIST name="Sly-v3-Reflash-lockdown" desc="Reflash a Sly-v3 and prompt for serialnumber then lockdown">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-sly-v3-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
    <CMD state="Updater" type="push" body="$ touch /mnt/mmcblk0p7/serial_lock">Locking down panel</CMD>
  </LIST>
  <LIST name="Wallsly-Reflash-Plus-Serial" desc="Reflash a Wallsly and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Wallsly-v3-Reflash-Plus-Serial" desc="Reflash a Wallsly and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-v3-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Wallsly-v4-Reflash-Plus-Serial" desc="Reflash a Wallsly and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-v4-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Wallsly-v6-Reflash-Plus-Serial" desc="Reflash a Wallsly and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-v6-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Wallsly-Preflashed-eMMC" desc="Boot from preflashed eMMC">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-Wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="jump" > Jumping to OS image. </CMD>
  </LIST>

  <LIST name="Wallsly-v6-Boot-to-shell" desc="Boot Wallsly to shell in initramfs">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/binshell-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-v6-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>
  </LIST>
  <LIST name="Wallsly-Reflash-Save-Serial-Etc" desc="Reflash a Wallsly and save the existing serialnumber and other info">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-wallsly.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/sly-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-wallsly-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/save-restore-serialnums.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE save-restore-serialnums.sh"/>
    <CMD state="Updater" type="push" body="$ bash save-restore-serialnums.sh save">Saving serialnumbers, keys, skus ...</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/sly-qt5-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p7 /mnt/mmcblk0p7"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p7" file="files/media-extra.tar.gz">Sending and extracting media/extra</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ bash save-restore-serialnums.sh restore">Restoring serialnumbers, keys, skus ...</CMD>
  </LIST>

  <LIST name="Brazen-Reflash-Plus-Serial" desc="Reflash a Brazen and prompt for serialnumber">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-brazen.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/brazen-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-brazen-v6-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/brazen-mfg-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ /mnt/mmcblk0p5/usr/local/bin/serialnumset">Prompting for serialnumber</CMD>
  </LIST>

  <LIST name="Brazen-Preflashed-eMMC" desc="Boot from preflashed eMMC">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-brazen.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="jump" > Jumping to OS image. </CMD>
  </LIST>

  <LIST name="Brazen-Boot-to-shell" desc="Boot Brazen to shell in initramfs">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-brazen.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/binshell-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/brazen-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-brazen-v1-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>
  </LIST>
  <LIST name="Brazen-Reflash-Save-Serial-Etc" desc="Reflash a Wallsly and save the existing serialnumber and other info">
    <CMD state="BootStrap" type="boot" body="BootStrap" file ="files/u-boot-brazen.imx">Loading U-boot</CMD>

    <CMD state="BootStrap" type="load" file="files/usb-reflash-boot.scr" address="0x11000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Bootscript.</CMD>

    <CMD state="BootStrap" type="load" file="files/zImage" address="0x12000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Kernel.</CMD>

    <CMD state="BootStrap" type="load" file="files/brazen-image-mfgtool-initramfs-imx6dl-slimline.cpio.gz.u-boot" address="0x12C00000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading Initramfs.</CMD>

    <CMD state="BootStrap" type="load" file="files/imx6dl-brazen-ldo.dtb" address="0x18000000"
      loadSection="OTH" setSection="OTH" HasFlashHeader="FALSE">Loading device tree.</CMD>

    <CMD state="BootStrap" type="jump" >Jumping to OS image.</CMD>

    <CMD state="Updater" type="push" body="send" file="files/save-restore-serialnums.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE save-restore-serialnums.sh"/>
    <CMD state="Updater" type="push" body="$ bash save-restore-serialnums.sh save">Saving serialnumbers, keys, skus ...</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-prefs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-prefs-init.sh">Partitioning eMMC</CMD>

    <CMD state="Updater" type="push" body="$ mkdir -p /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="$ mount /dev/mmcblk0p5 /mnt/mmcblk0p5"/>
    <CMD state="Updater" type="push" body="pipe tar -zxv -C /mnt/mmcblk0p5" file="files/brazen-mfg-image-imx6dl-slimline.tar.gz">Sending and extracting rootfs</CMD>

    <CMD state="Updater" type="push" body="send" file="files/slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ cp $FILE slimline-emmc-postfs-init.sh"/>
    <CMD state="Updater" type="push" body="$ bash slimline-emmc-postfs-init.sh">Running post-fsextract script</CMD>

    <CMD state="Updater" type="push" body="$ bash save-restore-serialnums.sh restore">Restoring serialnumbers, keys, skus ...</CMD>
  </LIST>
</UCL>
